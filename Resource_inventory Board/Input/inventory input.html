<html lang="en" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <head>
    <title>Inventory Input</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:400,700|Material+Icons" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
    <link rel="stylesheet" href="https://webeocboardfiles.juvare.com/board/1.0/css/material-kit.min.css" />
    <link rel="stylesheet" href="https://webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.css" />
    <style type="text/css">
			.lightboxcontainer,
			.lightboxcontainer iframe {
				border: 0px !important;
			}
		</style>
  </head>
  <xsl:variable name="agencyFilter">
    <value-of select="/data/ViewParameter[@name = 'agency']" />
  </xsl:variable>
  <xsl:variable name="isWarehouse">
    <value-of select="/data/ViewParameter[@name = 'warehouse']" />
  </xsl:variable>
  <body class="bg-faded-grey-light">
    <form aria-label="Data" class="mb-0" id="input-form">
      <nav class="navbar navbar-default navbar-expand-lg" aria-label="Navigation">
        <header class="container-fluid flex-left" aria-label="Header">
          <div class="img-agencyinfo mr-3 mobile-hide-lg">
            <agencyinfo type="primarylogo" />
          </div>
          <div>
            <h1 class="boardname">
              <b>
                <choose>
                  <when test="//@dataid = 0">New Record</when>
                  <otherwise>Edit Record</otherwise>
                </choose>
              </b>
            </h1>
            <h2 class="incidentname">
              <incidentname />
            </h2>
          </div>
        </header>
      </nav>
      <main aria-label="Main Section" class="container-fluid container-max-width py-2 my-2 form-border">
        <section>
          <h2 class="section-header">
            <b>Basic Inventory Details</b>
          </h2>
          <div class="form-row">
            <div class="form-group bmd-form-group col" >
              <label class="form-label d-flex align-items-center" style="pointer-events: auto" for="date_record_created" id="igilpw">Date Record Created<div class="help-text-container ml-2"><i class="material-icons cursor-default faded-grey" data-toggle="tooltip" data-placement="right" title="Date the record was created" style="line-height: .5; font-size: 1.6em;" id="iu00kg">help</i></div></label>
              <input name="date_record_created" type="text" class="form-control dpickr hide-default-calendar cursor-pointer" fieldtype="datetime" label="Date record created" id="date_record_created" autocomplete="off" value="_currentdatetime"/>
          </div>
          <div class="form-group bmd-form-group col">
            <label class="form-label d-flex align-items-center" style="pointer-events: auto" for="last_inventory_date" id="ifp7u7p">Last Inventory Date</label>
            <input name="last_inventory_date" type="date" class="form-control dpickr" fieldtype="datetime" label="Last Inventory Date" id="last_inventory_date"/>
        </div>
        <div class="form-group bmd-form-group col-md-6" >
                                <label class="form-label d-flex align-items-center" style="pointer-events: auto" for="record_last_modified" id="ig30n96">Date Record Last Modified</label>
                                <input name="record_last_modified" type="date" class="form-control dpickr" fieldtype="datetime" label="Record Last Modified" id="record_last_modified"/>
                            </div>
            <div class="form-group bmd-form-group col-12">
              <label class="form-label required">Resource Name</label>
              <input type="text" name="resource_name" class="form-control" required="true" label="Resource Name" />
              <div class="invalid-feedback">Please provide a resource name.</div>
            </div>
           
          </div>
          <div class="form-row">
            <div class="form-group bmd-form-group col-md-4 col-sm-12">
              <label class="form-label required">Quantity</label>
              <input type="text" name="resource_quantity" class="form-control" value="_number" required="true" label="Quantity" />
              <div class="invalid-feedback">Please provide a quantity.</div>
            </div>
            <div class="form-group bmd-form-group col-md-4 col-sm-12">
              <label class="form-label required">Unit of Issue</label>
              <select name="resource_unit" list="RID - Request - Unit of Measure" defaulttext="" class="form-control" required="true" label="Unit of Issue" />
              <div class="invalid-feedback">Please select a unit of issue.</div>
            </div>
            <div class="form-group bmd-form-group col-md-4 col-sm-12">
              <label class="form-label required">Status</label>
              <select name="resource_status" list="RID - Inventory - Status" defaulttext="" class="form-control" required="true" label="Status" />
              <div class="invalid-feedback">Please select a status.</div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group bmd-form-group col-12">
              <label class="form-label">Description</label>
              <textarea name="resource_description" rows="4" class="form-control" label="Description" ></textarea>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Serial #</label>
              <input type="text" name="resource_serial_number" class="form-control" label="Serial Number" />
            </div>
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <div class="form-group form-file-upload form-file-simple has-feedback ">
                <label class="form-label">Resource Image</label>
                <div class="input-group">
                  <input name="resource_image_name" type="text" class="form-control inputFileVisible" placeholder="Click to browse" readonly="readonly" label="Resource Image Name" />
                  <input name="resource_image" type="file" class="inputFileHidden" data-file-name-field="resource_image_name" accept="image/*" label="Resource Image" />
                </div>
              </div>
            </div>
          </div>
        </section>
        <div class="horizontal-line-break mt-3 mb-3" />
        <section>
          <h2 class="section-header">
            <b>Resource Home Location</b>
          </h2>
          <div class="form-row">
            <div class="form-group bmd-form-group col-12">
              <label class="form-label">Location Name</label>
              <input type="text" name="resource_location_name" class="form-control" label="Location Name" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Location Address</label>
              <input type="text" name="resource_location_address" class="form-control" label="Location Address" />
            </div>
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Map</label>
              <div class="flex flex-center">
                <feature name="resource_location" type="button" label-field="resource_location_name" status-field="resource_status" address-field="resource_location_address" shape="point" autopopulate="address" class="form-control btn btn-sm btn-primary m-0 js-feature-map">GENERATE MAP
									<i class="material-icons ml-2">room</i></feature>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group bmd-form-group col-md-6" >
              <label class="form-label d-flex align-items-center" style="pointer-events: auto" for="trailer_number" >RCC Trailer and Bin #</label>
              <select name="trailer_number" class="form-control" label="RCC Trailer and Bin #" id="trailer_number" list="RID -  Trailer Number"></select>
          </div>
      </div>
        </section>
        <br/>
        <div class="horizontal-line-break mt-3 mb-3" />
        <section>
          <h2 class="section-header">
            <b>Owners and Operators</b>
          </h2>
          
          <div class="form-row">
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label required">Resource Owner</label>
              <input type="text" name="resource_owner" class="form-control" readonly="readonly" required="true" label="Resource Owner">
                <if test="not(//@resource_owner) or //@resource_owner = ''">
                  <attribute name="value">
                    <value-of select="//@positionname" />
                  </attribute>
                </if>
              </input>
              <div class="invalid-feedback">Please provide a resource owner. It <i>must</i> be an existing WebEOC position.</div>
            </div>
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <boardpermission name="Show Agency Fields">
                <label class="form-label">Resource Agency</label>
                <notapplied>
                  <label class="form-label">Resource Jurisdiction</label>
                </notapplied>
              </boardpermission>
              <input type="text" name="resource_jurisdiction" class="form-control" label="Resource Jurisdiction">
                <if test="not(//@resource_jurisdiction) or //@resource_jurisdiction = ''">
                  <attribute name="value">
                    <value-of select="substring(/data/groups[starts-with(@name,'Agency - ')][1]/@name,10)" />
                  </attribute>
                </if>
                <boardpermission name="Show Agency Fields">
                  <if test="/data/groups[starts-with(@name,'Agency - ')][1]/@name != ''">
                    <attribute name="readonly">readonly</attribute>
                  </if>
                </boardpermission>
              </input>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Owner Name</label>
              <input type="text" name="resource_poc_name" class="form-control" label="POC Name" />
            </div>
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Owner Phone</label>
              <input type="text" name="resource_poc_phone" class="form-control" label="POC Phone" />
            </div>
          
            <div class="form-group bmd-form-group col-12">
              <label class="form-label">Owner Email</label>
              <input type="text" name="resource_poc_email" class="form-control" label="POC Email" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Operator Last Name</label>
              <input type="text" name="operator_last_name" class="form-control" label="Operator last name" />
            </div>
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Operator First Name</label>
              <input type="text" name="operator_first_name" class="form-control" label="Operator First Name" />
            </div>
            <div class="form-group bmd-form-group col-md-12" id="id4gyjf">
              <label class="form-label d-flex align-items-center" style="pointer-events: auto" for="operator_agency_id" id="iwg3pzu">Operator Agency ID<div class="help-text-container ml-2"><i class="material-icons cursor-default faded-grey" data-toggle="tooltip" data-placement="right" title="Operator Agency ID and Serial Number" style="line-height: .5; font-size: 1.6em;" id="i92qf62">help</i></div></label>
              <input name="operator_agency_id" type="text" class="form-control" label="Operator Agency ID" id="operator_agency_id"/>
          </div>
                      
          </div>
        </section>
        <div class="horizontal-line-break mt-3 mb-3" />
        <section>
          <h2 class="section-header">
            <b>Cost Information</b>
          </h2>
          <div class="form-row">
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Actual Cost</label>
              <div class="form-inline">
                <span>$</span>
                <!-- PATTERN FOR COMMA AS THOUSANDS SEPERATOR AND DECIMAL AS FRACTIONAL SEPERATOR -->
                <input type="text" name="resource_actual_cost" class="form-control cost" style="width:calc(100% - 1em);" pattern="^(\$)?([1-9]{{1}}[0-9]{{0,2}})(\,\d{{3}})*(\.\d{{2}})?$|^(\$)?([1-9]{{1}}[0-9]{{0,2}})(\d{{3}})*(\.\d{{2}})?$|^(0)?(\.\d{{2}})?$|^(\$0)?(\.\d{{2}})?$|^(\$\.)(\d{{2}})?$" label="Actual Cost" />
                <!-- PATTERN FOR DECIMAL AS THOUSANDS SEPERATOR AND COMMA AS FRACTIONAL SEPERATOR -->
                <!-- <input type="text" name="cost_total" class="form-control cost" style="width:calc(100% - 1em);" pattern="^(\$)?([1-9]{{1}}[0-9]{{0,2}})(\.\d{{3}})*(\,\d{{2}})?$|^(\$)?([1-9]{{1}}[0-9]{{0,2}})(\d{{3}})*(\,\d{{2}})?$|^(0)?(\,\d{{2}})?$|^(\$0)?(\,\d{{2}})?$|^(\$\,)(\d{{2}})?$" label="Actual Cost"/> -->
                <div class="invalid-feedback">Please provide a valid cost.</div>
              </div>
            </div>
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Cost Rate</label>
              <select name="resource_actual_cost_rate" list="RID - Inventory - Reimbursement" defaulttext="" class="form-control" label="Cost Rate" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Reimbursement Amount</label>
              <div class="form-inline">
                <span>$</span>
                <!-- PATTERN FOR COMMA AS THOUSANDS SEPERATOR AND DECIMAL AS FRACTIONAL SEPERATOR -->
                <input type="text" name="resource_reimbursement_amount" class="form-control cost" style="width:calc(100% - 1em);" pattern="^(\$)?([1-9]{{1}}[0-9]{{0,2}})(\,\d{{3}})*(\.\d{{2}})?$|^(\$)?([1-9]{{1}}[0-9]{{0,2}})(\d{{3}})*(\.\d{{2}})?$|^(0)?(\.\d{{2}})?$|^(\$0)?(\.\d{{2}})?$|^(\$\.)(\d{{2}})?$" label="Reimbursement Amount" />
                <!-- PATTERN FOR DECIMAL AS THOUSANDS SEPERATOR AND COMMA AS FRACTIONAL SEPERATOR -->
                <!-- <input type="text" name="resource_reimbursement_amount" class="form-control cost" style="width:calc(100% - 1em);" pattern="^(\$)?([1-9]{{1}}[0-9]{{0,2}})(\.\d{{3}})*(\,\d{{2}})?$|^(\$)?([1-9]{{1}}[0-9]{{0,2}})(\d{{3}})*(\,\d{{2}})?$|^(0)?(\,\d{{2}})?$|^(\$0)?(\,\d{{2}})?$|^(\$\,)(\d{{2}})?$" label="Reimbursement Amount"/> -->
                <div class="invalid-feedback">Please provide a valid amount.</div>
              </div>
            </div>
            <div class="form-group bmd-form-group col-md-6 col-sm-12">
              <label class="form-label">Reimbursement Rate</label>
              <select name="resource_reimbursement_rate" list="RID - Inventory - Reimbursement" defaulttext="" class="form-control" label="Reimbursement Rate" />
            </div>
          </div>
          
        </section>
        <if test="//@dataid != 0 and //@resource_owner">
          <boardpermission name="Deployments - View">
            <div class="horizontal-line-break mt-3 mb-3" />
            <section>
              <div class="row">
                <div class="col-md-12 col-sm-12 d-flex">
                  <h2 class="section-header text-info">Deployments</h2>
                  <div class="ml-auto print-hide">
                    <boardpermission name="Deployments - Create">
                      <boardpermission name="Inventory - Update Position">
                        <if test="//@resource_owner = /data/@positionname">
                          <viewlink name="Input - Deployment" table="Deployment Table" type="button" class="btn btn-sm btn-primary scroll-link" target="dialog" dialogheight="100%" dialogwidth="100%" ondialogclose="scrollFix()" refreshid="deployment-div">
                            <viewparameter name="source">inventory</viewparameter>
                            <viewparameter name="agency">
                              <value-of select="$agencyFilter" />
                            </viewparameter>Add Deployment
																<i class="material-icons ml-2">add</i></viewlink>
                        </if>
                        <notapplied>
                          <boardpermission name="Inventory - Update Agency">
                            <if test="/data/groups[contains(@name,current()/@originating_agency_group)] or /data/groups[contains(@name, current()/@resource_jurisdiction)] or //@resource_owner = /data/@positionname">
                              <viewlink name="Input - Deployment" table="Deployment Table" type="button" class="btn btn-sm btn-primary scroll-link" target="dialog" dialogheight="100%" dialogwidth="100%" ondialogclose="scrollFix()" refreshid="deployment-div">
                                <viewparameter name="source">inventory</viewparameter>
                                <viewparameter name="agency">
                                  <value-of select="$agencyFilter" />
                                </viewparameter>Add Deployment
																		<i class="material-icons ml-2">add</i></viewlink>
                            </if>
                            <notapplied>
                              <boardpermission name="Inventory - Update All">
                                <viewlink name="Input - Deployment" table="Deployment Table" type="button" class="btn btn-sm btn-primary scroll-link" target="dialog" dialogheight="100%" dialogwidth="100%" ondialogclose="scrollFix()" refreshid="deployment-div">
                                  <viewparameter name="source">inventory</viewparameter>
                                  <viewparameter name="agency">
                                    <value-of select="$agencyFilter" />
                                  </viewparameter>Add Deployment
																			<i class="material-icons ml-2">add</i></viewlink>
                              </boardpermission>
                            </notapplied>
                          </boardpermission>
                        </notapplied>
                      </boardpermission>
                    </boardpermission>
                  </div>
                </div>
              </div>
              <div class="row" id="deployment-div">
                <section class="col mt-2" aria-label="Table">
                  <table id="deployment-table" class="table table-striped table-sm mt-1" width="100%">
                    <thead>
                      <tr>
                        <th style="font-size: 10pt;">Deployment #</th>
                        <th style="font-size: 10pt;">Deployed</th>
                        <th style="font-size: 10pt;">Returned</th>
                        <th style="font-size: 10pt;">Status</th>
                        <th width="5%" />
                      </tr>
                    </thead>
                    <tbody id="deployment-data">
                      <relatedlist table="Deployment Table" filter="deployment_remove &lt;&gt; 'Yes'" aria-label="Data">
                        <tr>
                          <td style="font-size: 10pt;">
                            <value-of select="@dataid" />
                          </td>
                          <td style="font-size: 10pt;">
                            <eocfield disableclick="true" name="deployment_quantity" type="rl" table="Deployment Table" />
                            <space />
                            <eocfield disableclick="true" name="deployment_unit" type="rl" table="Deployment Table" />
                          </td>
                          <td style="font-size: 10pt;">
                            <eocfield disableclick="true" name="deployment_quantity_returned" type="rl" table="Deployment Table" />
                            <space />
                            <value-of select="@deployment_unit" />
                          </td>
                          <td style="font-size: 10pt;">
                            <eocfield disableclick="true" name="deployment_status" type="rl" table="Deployment Table" />
                          </td>
                          <td class="text-right">
                            <div class="dropdown cursor-pointer">
                              <a data-toggle="dropdown">
                                <b>
                                  <i class="material-icons faded-grey">more_horiz</i>
                                </b>
                              </a>
                              <div class="dropdown-menu dropdown-menu-right cursor-pointer">
                                <boardpermission name="Deployments - Update Position">
                                  <if test="@deployment_position = /data/@positionname">
                                    <viewlink class="dropdown-item" name="Input - Deployment" table="Deployment Table" target="dialog" dialogheight="100%" dialogwidth="100%" ondialogclose="scrollFix()" refreshid="deployment-div">
                                      <viewparameter name="source">request</viewparameter>
                                      <viewparameter name="agency">
                                        <value-of select="$agencyFilter" />
                                      </viewparameter>
                                      <viewparameter name="warehouse">
                                        <value-of select="$isWarehouse" />
                                      </viewparameter>
                                      <span>Edit</span>
                                    </viewlink>
                                  </if>
                                  <notapplied>
                                    <boardpermission name="Deployments - Update Agency">
                                      <if test="@originating_agency_group != '' and (/data/groups[contains(@name,current()/@originating_agency_group)] or @deployment_position = /data/@positionname)">
                                        <viewlink class="dropdown-item" name="Input - Deployment" table="Deployment Table" target="dialog" dialogheight="100%" dialogwidth="100%" ondialogclose="scrollFix()" refreshid="deployment-div">
                                          <viewparameter name="source">request</viewparameter>
                                          <viewparameter name="agency">
                                            <value-of select="$agencyFilter" />
                                          </viewparameter>
                                          <viewparameter name="warehouse">
                                            <value-of select="$isWarehouse" />
                                          </viewparameter>
                                          <span>Edit</span>
                                        </viewlink>
                                      </if>
                                      <notapplied>
                                        <boardpermission name="Deployments - Update All">
                                          <viewlink class="dropdown-item" name="Input - Deployment" table="Deployment Table" target="dialog" dialogheight="100%" dialogwidth="100%" ondialogclose="scrollFix()" refreshid="deployment-div">
                                            <viewparameter name="source">request</viewparameter>
                                            <viewparameter name="agency">
                                              <value-of select="$agencyFilter" />
                                            </viewparameter>
                                            <viewparameter name="warehouse">
                                              <value-of select="$isWarehouse" />
                                            </viewparameter>
                                            <span>Edit</span>
                                          </viewlink>
                                        </boardpermission>
                                      </notapplied>
                                    </boardpermission>
                                  </notapplied>
                                </boardpermission>
                                <boardpermission name="Deployments - Delete">
                                  <div class="dropdown-divider" />
                                  <viewlink class="dropdown-item text-danger scroll-link" name="Remove Deployment Record" table="Deployment Table" target="dialog" dialogheight="100%" dialogwidth="100%" ondialogclose="scrollFix()" refreshid="deployment-div">Delete</viewlink>
                                </boardpermission>
                              </div>
                            </div>
                          </td>
                        </tr>
                        <if test="false()">
                          <eocfield name="deployment_position" type="rl" table="Deployment Table" />
                          <eocfield name="originating_agency_group" type="rl" table="Deployment Table" />
                          <eocfield name="originating_agency" type="rl" table="Deployment Table" />
                        </if>
                      </relatedlist>
                      <script>
												var depLinks = document.querySelectorAll('#deployment-data a[href="#"]')
												for(var depLink of depLinks){
													depLink.addEventListener('click', function(event){
														event.preventDefault();
													});
												}
												(function wireDeploymentTable(){
													if(typeof depTable !== 'undefined'){
														depTable = $('#deployment-table').dataTable({
															preDrawCallback: function(settings){togglePagination(settings, $(this))}
														});
													}
												}());
												if(typeof wireScroll === "function"){
													wireScroll();
												}
											</script>
                    </tbody>
                  </table>
                </section>
              </div>
            </section>
          </boardpermission>
        </if>
        <div class="horizontal-line-break mt-3 mb-3" />
        <section>
          <h2 class="section-header">
            <b>Attachments</b>
          </h2>
          <div class="form-row">
            <div class="form-group col-md-6 col-sm-12">
              <div class="form-group form-file-upload form-file-simple has-feedback ">
                <label class="form-label">Attachment 1</label>
                <div class="input-group">
                  <input name="resource_attachment_1_name" type="text" class="form-control inputFileVisible" placeholder="Click to browse" readonly="readonly" label="Attachment 1 Name" />
                  <input name="resource_attachment_1" type="file" class="inputFileHidden" data-file-name-field="resource_attachment_1_name" label="Attachment 1" />
                </div>
              </div>
            </div>
            <div class="form-group col-md-6 col-sm-12">
              <label class="form-label">Attachment 1 Description</label>
              <input type="text" name="resource_attachment_1_description" class="form-control" label="Attachment 1 Description" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6 col-sm-12">
              <div class="form-group form-file-upload form-file-simple has-feedback ">
                <label class="form-label">Attachment 2</label>
                <div class="input-group">
                  <input name="resource_attachment_2_name" type="text" class="form-control inputFileVisible" placeholder="Click to browse" readonly="readonly" label="Attachment 2 Name" />
                  <input name="resource_attachment_2" type="file" class="inputFileHidden" data-file-name-field="resource_attachment_2_name" label="Attachment 2" />
                </div>
              </div>
            </div>
            <div class="form-group col-md-6 col-sm-12">
              <label class="form-label">Attachment 2 Description</label>
              <input type="text" name="resource_attachment_2_description" class="form-control" label="Attachment 2 Description" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-md-6 col-sm-12">
              <div class="form-group form-file-upload form-file-simple has-feedback ">
                <label class="form-label">Attachment 3</label>
                <div class="input-group">
                  <input name="resource_attachment_3_name" type="text" class="form-control inputFileVisible" placeholder="Click to browse" readonly="readonly" label="Attachment 3 Name" />
                  <input name="resource_attachment_3" type="file" class="inputFileHidden" data-file-name-field="resource_attachment_3_name" label="Attachment 3" />
                </div>
              </div>
            </div>
            <div class="form-group col-md-6 col-sm-12">
              <label class="form-label">Attachment 3 Description</label>
              <input type="text" name="resource_attachment_3_description" class="form-control" label="Attachment 3 Description" />
            </div>
          </div>
        </section>
        <section class="d-none">
          <h2 class="section-header">Hidden Fields</h2>
          <div class="form-row">
            <div class="form-group col-12">
              <label class="form-label">Remove Record</label>
              <input type="text" name="resource_remove" class="form-control" label="Remove Record" />
            </div>
          </div>
          <div class="form-row">
            <div class="form-group col-12">
              <label class="form-label">Originating Agency Group</label>
              <input type="text" name="originating_agency_group" class="form-control" label="Originating Agency Group">
                <if test="not(//@originating_agency_group) or //@originating_agency_group = ''">
                  <attribute name="value">
                    <value-of select="/data/groups[starts-with(@name,'Agency - ')][1]/@name" />
                  </attribute>
                </if>
              </input>
            </div>
          </div>
        </section>
        <section class="text-right" aria-label="Footer">
          <returnbutton button="return-button" class="btn btn-sm btn-outline-primary mr-2">Cancel</returnbutton>
          <savebutton class="btn btn-sm btn-primary">Save</savebutton>
        </section>
      </main>
      <grouplist />
    </form>
    <script src="https://webeocboardfiles.juvare.com/board/1.0/js/core/jquery.min.js" />
    <script src="https://webeocboardfiles.juvare.com/board/1.0/js/core/popper.min.js" />
    <script src="https://webeocboardfiles.juvare.com/board/1.0/js/plugins/moment.min.js" />
    <script src="https://webeocboardfiles.juvare.com/board/1.0/js/core/bootstrap-material-design.min.js" />
    <script src="https://webeocboardfiles.juvare.com/board/1.0/js/material-kit.min.js" />
    <script src="https://webeocboardfiles.juvare.com/board/1.0/lib/flatpickr/flatpickr.min.js" />
    <script src="https://webeocboardfiles.juvare.com/board/1.0/js/ux-webeoc-board-standards.min.js" />
    <script boardresource="jquery.maskMoney.min.js" type="text/javascript" />
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js" />
    <script src="https://cdn.datatables.net/1.10.23/js/dataTables.bootstrap4.min.js" />
    <script>
			(function(window, $) {
				"use strict";

				$('.cost').maskMoney({
					thousands: ',',
					decimal: '.',
					allowZero: true
				});

				wireDataTables();
				wireScroll();

				$('[name="cmdSave"]').on('click', function () {
					var validationResponse = BoardUI.validation.validateForm();
					if (!validationResponse.isValid) {
						if (validationResponse.errorFields.length &gt; 1){
							var message = "These fields need your attention:\n\n";
							validationResponse.errorFields.forEach(field =&gt; {
								message += "• " + (field.getAttribute("label") || field.getAttribute("name")) + "\n";
							})
						} else {
							var message = "This field needs your attention: ";
							message += (validationResponse.errorFields[0].getAttribute("label") || validationResponse.errorFields[0].getAttribute("name"));
						}
						BoardUI.validation.createValidationErrorMessage(validationResponse, message);
					}
				});

			}(window, jQuery));

			function wireDataTables(){
				$.extend($.fn.dataTable.defaults, {
					searching: false,
					ordering:  false,
					'info': false,
					lengthChange: false,
					pageLength: 5,
					'language': {
						'emptyTable': 'No records available'
					}
				});
				window.depTable = $('#deployment-table').dataTable({
					preDrawCallback: function(settings){togglePagination(settings, $(this))}
				});
			}

			function togglePagination(settings, thisObj){
				var api = new $.fn.dataTable.Api(settings);
				var pagination = thisObj.closest('.dataTables_wrapper').find('.dataTables_paginate');
				pagination.toggle(api.page.info().pages &gt; 1);
			}
			
			var scrollPos = 0;
			function wireScroll(){
				$('.scroll-link').off('click').on('click', function(){
					scrollPos = window.scrollY;
					window.scrollTo(0,0);
				});
			}

			function scrollFix(){
				window.scrollTo(0,scrollPos);
			}
		</script>
  </body>
</html>